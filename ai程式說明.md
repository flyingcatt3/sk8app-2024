# 程式碼說明

這個程式碼是一個使用 Flet 庫建構的 GUI 應用程式,主要功能是提供一個滑板主題的AI助理。用戶可以通過輸入文本提示與AI助理進行對話,AI助理會根據提示給出相應的回答。

程式碼的主要流程如下:

1. 導入所需的庫和模組。
2. 定義一些常量,如數據路徑、提示模板等。
3. 定義樣式函數,用於設置 GUI 元素的樣式。
4. 定義一些自定義類,如 `MainContentArea`、`CreateMessage`、`Prompt`等,用於構建 GUI 介面和實現相關功能。
5. 定義主程序 `main`,在這裡設置 GUI 頁面的屬性和佈局。
6. 在 `main` 函數中,創建 GUI 元素,如按鈕、文本框等,並設置它們的樣式和事件處理函數。
7. 在 `Prompt` 類中,定義了一些關鍵方法,如 `animate_text_output`、`user_output`、`gpt_output` 和 `run_prompt`。這些方法分別用於實現文本輸出動畫、處理用戶輸入、生成AI回應和運行提示。
8. 在 `gpt_output` 方法中,首先準備向量數據庫,然後根據用戶輸入的提示在數據庫中搜索相關文本。如果找到相關文本,則將其作為上下文信息,結合提示模板和用戶輸入,構建最終的提示。
9. 使用 `ChatGoogleGenerativeAI` 對象,將構建好的提示輸入到 Google AI 模型中,生成相應的回應。
10. 在 `run_prompt` 方法中,當用戶輸入提示並按下回車鍵時,會觸發這個方法。方法中會先進行一些界面更新操作,然後調用 `user_output` 和 `gpt_output` 方法,分別顯示用戶輸入和AI回應。
11. 在主程序中,還定義了一些按鈕,點擊這些按鈕可以向文本框插入預設的提示語句。
12. 最後,通過 `ft.app(target=main)` 啟動應用程式。

總的來說,這個程式碼實現了一個基於 Flet 庫的 GUI 應用程式,用戶可以通過輸入文本與 AI 助理進行對話,AI 助理會根據上下文信息和提示,生成相應的回應。程式碼中還包含了一些自定義類和方法,用於實現特定的功能,如文本輸出動畫、數據庫搜索等。